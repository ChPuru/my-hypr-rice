# ----------------------------------------------------- 
# Hyprland Config :: Catppuccin Mocha
# ----------------------------------------------------- 

# Layer rules for waybar and other overlays
layerrule = blur,waybar
layerrule = ignorezero,waybar
layerrule = blur,rofi
layerrule = ignorezero,rofi

# --- Plugins ---
plugin = /usr/lib/hyprland/plugins/burn-my-windows.so

# --- Monitors ---
monitor=,highrr,auto,1
monitor=,preferred,auto,1,transform,0

# --- Autostart ---
exec-once = waybar
exec-once = dunst
exec-once = sleep 0.3 && swaync
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = swww-daemon
exec-once = nm-applet --indicator
exec-once = blueman-applet
exec-once = eww daemon && eww open bar
exec-once = sleep 2 && ags
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = hypridle
exec-once = sleep 1 && swww img ~/Pictures/wallpapers/catppuccin.png --transition-type grow --transition-step 5 --transition-fps 144
exec-once = cava -c ~/.config/cava/config &
exec-once = spotify-tui &

# --- Source Other Configs ---
source = ~/.config/hypr/keybinds.conf
source = ~/.config/hypr/windowrules.conf
source = ~/.config/hypr/workspaces.conf

# --- Environment Variables ---
env = XCURSOR_SIZE,24
env = XCURSOR_THEME,Bibata-Modern-Classic
env = GTK_THEME,Catppuccin-Mocha-Standard-Mauve-Dark
env = QT_QPA_PLATFORMTHEME,qt6ct
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = WLR_NO_HARDWARE_CURSORS,1
env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_TYPE,wayland
env = GBM_BACKEND,nvidia-drm
env = WLR_RENDERER,vulkan

# --- Input ---
input {
    kb_layout = us
    kb_variant = 
    kb_model =
    kb_options = caps:escape
    kb_rules =
    repeat_rate = 50
    repeat_delay = 300
    numlock_by_default = true
    left_handed = false
    follow_mouse = 1
    mouse_refocus = false
    float_switch_override_focus = 2
    
    touchpad {
        natural_scroll = true
        scroll_factor = 0.3
        middle_button_emulation = true
        tap-to-click = true
        drag_lock = true
        disable_while_typing = true
    }
    
    sensitivity = 0
    accel_profile = flat
}

# --- General ---
general {
    gaps_in = 8
    gaps_out = 20
    border_size = 3
    col.active_border = rgba(cba6f7ff) rgba(f38ba8ff) rgba(eba0acff) rgba(fab387ff) rgba(f9e2afff) rgba(a6e3a1ff) rgba(94e2d5ff) rgba(89b4faff) rgba(74c7ecff) 45deg
    col.inactive_border = rgba(313244aa) rgba(45475aaa) 45deg
    layout = dwindle
    allow_tearing = true
    resize_on_border = true
    extend_border_grab_area = 15
    hover_icon_on_border = true
}

# --- Decoration ---
decoration {
    rounding = 15
    
    blur {
        enabled = true
        size = 6
        passes = 4
        new_optimizations = on
        ignore_opacity = true
        xray = false
        noise = 0.0117
        contrast = 1.3000
        brightness = 1.0000
        vibrancy = 0.2100
        vibrancy_darkness = 0.1696
        special = true
    }
    
#    drop_shadow = true
#    shadow_range = 30
#    shadow_render_power = 3
#    shadow_offset = 0 0
#    col.shadow = rgba(1e1e2eff)
#    col.shadow_inactive = rgba(1e1e2ebb)
    
    dim_inactive = true
    dim_strength = 0.1
    dim_special = 0.8
    dim_around = 0.4
    
#    screen_shader = ~/.config/hypr/shaders/crt.frag
}

# --- Animations ---
animations {
    enabled = true
#    first_launch_anim = true
    
    bezier = overshot, 0.05, 0.9, 0.1, 1.05
    bezier = smoothOut, 0.36, 0, 0.66, -0.56
    bezier = smoothIn, 0.25, 1, 0.5, 1
    bezier = realsmooth, 0.28, 0.29, 0.69, 1.08
    bezier = wind, 0.05, 0.9, 0.1, 1.05
    bezier = winIn, 0.1, 1.1, 0.1, 1.1
    bezier = winOut, 0.3, -0.3, 0, 1
    bezier = liner, 1, 1, 1, 1
    bezier = linear, 0.0, 0.0, 1.0, 1.0
    
    animation = windows, 1, 5, overshot, slide
    animation = windowsIn, 1, 5, winIn, slide
    animation = windowsOut, 1, 5, winOut, slide
    animation = windowsMove, 1, 4, wind, slide
    animation = border, 1, 10, linear
    animation = borderangle, 1, 100, linear, loop
    animation = fade, 1, 8, smoothIn
    animation = fadeDim, 1, 8, smoothIn
    animation = workspaces, 1, 5, overshot, slidevert
    animation = specialWorkspace, 1, 3, realsmooth, slidevert
}

# Blur configuration
blurls = waybar
blurls = rofi
blurls = swaync-notification-window
blurls = swaync-control-center
blurls = ags
blurls = gtk-layer-shell
# --- Dwindle Layout ---
dwindle {
    pseudotile = true
    preserve_split = true
    smart_split = false
    smart_resizing = true
    force_split = 0
    special_scale_factor = 0.8
    split_width_multiplier = 1.0
    use_active_for_splits = true
    default_split_ratio = 1.0
#    no_gaps_when_only = false
}


# Gestures
gestures {
    workspace_swipe = true
    workspace_swipe_fingers = 3
    workspace_swipe_distance = 300
    workspace_swipe_invert = true
    workspace_swipe_min_speed_to_force = 30
    workspace_swipe_cancel_ratio = 0.5
    workspace_swipe_create_new = true
    workspace_swipe_direction_lock = true
    workspace_swipe_direction_lock_threshold = 10
    workspace_swipe_forever = false
#    workspace_swipe_numbered = false
    workspace_swipe_use_r = false
}

# Master layout settings
master {
    allow_small_split = false
    special_scale_factor = 0.8
    mfact = 0.55
#    new_is_master = true
    new_on_top = false
    no_gaps_when_only = false
    orientation = left
    inherit_fullscreen = true
    always_center_master = false
}

# --- Misc ---
misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    force_default_wallpaper = 0
    vfr = true
    vrr = 2
    mouse_move_enables_dpms = true
    key_press_enables_dpms = true
    always_follow_on_dnd = true
    layers_hog_keyboard_focus = true
    animate_manual_resizes = true
    animate_mouse_windowdragging = true
    disable_autoreload = false
    enable_swallow = true
    swallow_regex = ^(kitty|Alacritty)$
    swallow_exception_regex = ^(wev)$
    focus_on_activate = false
    mouse_move_focuses_monitor = true
    render_ahead_of_time = false
    render_ahead_safezone = 1
    cursor_zoom_factor = 1.0
    cursor_zoom_rigid = false
    allow_session_lock_restore = false
    background_color = 0x111111
    close_special_on_empty = true
    new_window_takes_over_fullscreen = 0
}

# XWayland settings
xwayland {
    use_nearest_neighbor = true
    force_zero_scaling = false
}

# OpenGL settings
opengl {
    nvidia_anti_flicker = true
    force_introspection = 2
}

# Group settings
group {
    insert_after_current = true
    focus_removed_window = true
    
    col.border_active = rgba(cba6f7ff) rgba(f38ba8ff) 45deg
    col.border_inactive = rgba(313244aa)
    col.border_locked_active = rgba(f9e2afff) rgba(fab387ff) 45deg
    col.border_locked_inactive = rgba(45475aaa)
    
    groupbar {
        enabled = true
        font_family = JetBrainsMono Nerd Font
        font_size = 8
        gradients = true
        render_titles = true
        scrolling = true
        text_color = rgba(cdd6f4ff)
        col.active = rgba(cba6f7aa)
        col.inactive = rgba(313244aa)
        col.locked_active = rgba(f9e2afaa)
        col.locked_inactive = rgba(45475aaa)
    }
}

# Window rules for visual effects
layerrule = blur, waybar
layerrule = blur, swaync-notification-window
layerrule = blur, swaync-control-center
layerrule = blur, rofi
layerrule = blur, logout_dialog
layerrule = ignorezero, waybar
layerrule = ignorezero, swaync-notification-window
layerrule = ignorezero, swaync-control-center
layerrule = ignorezero, rofi

# --- Plugin Configs ---
plugin:burn-my-windows {
    animation = incinerate
}